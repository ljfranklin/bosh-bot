// Generated by CoffeeScript 1.10.0
(function() {
  var imitate, isConstructor, quibble, wrapIfNeeded, wrapWithConstructor;

  quibble = require('quibble');

  imitate = require('./imitate');

  isConstructor = require('./is-constructor');

  wrapWithConstructor = require('./wrap-with-constructor');

  quibble.ignoreCallsFromThisFile();

  module.exports = function(path, stub) {
    var fakeThing, realThing;
    if (arguments.length > 1) {
      return quibble(path, stub);
    }
    realThing = require(quibble.absolutify(path));
    fakeThing = imitate(realThing, path);
    quibble(path, wrapIfNeeded(fakeThing, realThing));
    return fakeThing;
  };

  wrapIfNeeded = function(fakeThing, realThing) {
    if (isConstructor(realThing)) {
      return wrapWithConstructor(fakeThing);
    } else {
      return fakeThing;
    }
  };

}).call(this);
